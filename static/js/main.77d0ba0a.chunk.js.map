{"version":3,"sources":["hooks/useAgeContext.tsx","lib/age.ts","Provider.tsx","components/organisms/ProfileCard.tsx","constants/fullcalendar/settings.ts","constants/fullcalendar/templates.ts","lib/uuid.ts","lib/date.ts","core/story/sharedStory.ts","constants/visa.ts","core/story/CommunityCollegeAfterwardsWorkingHolidayStory.ts","constants/fullcalendar/options.ts","hooks/useStoryList.tsx","lib/util.ts","constants/school.ts","components/organisms/FullCalendar.tsx","hooks/useSharedStory.ts","hooks/useEventsHandler.tsx","components/pages/CalendarPage.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["date","Date","defaultValue","birth","addYears","toISOString","age","setBirth","Error","AgeContext","React","createContext","AgeContextProvider","children","useState","value","_birthday","today","birthDate","getFullYear","m","getMonth","getDate","calcAge","Provider","useAgeContext","useContext","utils","DateFnsUtils","ProfileCard","handleDateChange","useCallback","Card","Avatar","alt","DatePicker","disableFuture","openTo","format","label","views","onChange","FIELD_NAME","NAME_OF_STORY_ID","NAME_OF_ORDER","RESOURCE_ID__SHARED__AGE","RESOURCE_ID__SHARED__LIMIT","DARK_BLUE","FIELD__H1__SHARED","FIELD__H1__VISA","FIELD__H1__STATUS","RESOURCE_TEMPLATE__VISA_STUDY","RESOURCE_TEMPLATE__VISA_COOP","RESOURCE_TEMPLATE__WORKING_HOLIDAY_COOP","RESOURCE_TEMPLATE__STUDENT_STATUS","RESOURCE_TEMPLATE__WORKER_STATUS","DEPRECATED_SHARED__RESOURCES","id","uuid","uuidV4","convertIsoToDateTime","isoStr","split","generateEvents","startDate","endYear","getLastYear","years","start","end","list","i","push","getRangeNumbers","workingHolidayLimitEvent","birthday","lastYearDate","endDate","addMonths","resourceId","title","createWorkingHolidayLimitEvent","ageEventList","map","year","index","setFullYear","VISA_BACKGROUND_COLOR","STATUS_BACKGROUND_COLOR","CommunityCollegeAfterwardsWorkingHolidayStory","_periodMonths","_events","_resources","_storyId","this","createStory","resources","events","storyId","coopVisaResourceId","coopVisaResource","coopVisaEvent","studyVisaResourceId","studyVisaResource","studyVisaEvent","workingholidayResourceId","workingholidayResource","dateAsStartWorkingHoliday","workingHolidayVisaEvent","preWorkingHolidayVisaEvent","setMonth","studentStatusResourceId","studentStatusResource","studentStatusVisa","workerStatusResourceId","MY_TIME_LINE_NAME","headerToolbar","left","center","right","initialView","resourceGroupField","resourceAreaColumns","field","headerContent","name","type","duration","buttonText","resourceConfigs","resourceGroupLabelContent","groupValue","resourceOrder","FULL_CALENDAR_CONFIGS","slotLabelFormat","month","schedulerLicenseKey","nowIndicator","addingNumbers","stop","step","a","b","range","startMonths","FullCalendar","setEvents","useSharedStory","sharedEvents","sharedResources","generateSharedEvents","select","info","resource","console","warn","newEvent","startStr","endStr","prev","click","window","confirm","event","filter","e","set","useEventsHandler","stories","setStories","generate","_birth","_stories","num","flatMap","useStoryList","storyResources","useMemo","reduce","story","storyEvents","useEffect","selectable","editable","plugins","interactionPlugin","resourceTimelinePlugin","listPlugin","eventClick","initialDate","CalendarPage","App","className","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.77d0ba0a.chunk.js","sourcesContent":["import React from 'react'\nimport {addYears} from 'date-fns'\nimport {calcAge} from '../lib/age'\n\nconst PERSONA_AGE = 25;\nconst date = new Date();\nconst personaBirth = addYears(date, -PERSONA_AGE).toISOString();\n\ntype AgeContextRawValue = {\n  birth: string,\n  age: number;\n};\ntype AgeContextFunc = {\n  setBirth: Function\n}\ntype AgeContextValue = AgeContextRawValue & AgeContextFunc\n\nconst defaultValue = {\n  birth: personaBirth,\n  age: PERSONA_AGE,\n  setBirth: () => {throw new Error('this func should be replaced but not yet') },\n} as const;\n\nconst AgeContext = React.createContext<AgeContextValue>(defaultValue)\n\nexport const AgeContextProvider:React.FC = ({children}) => {\n  const [birth, setBirth] = React.useState(defaultValue.birth);\n  const age = calcAge(birth)\n\n  const value: AgeContextValue = {\n    birth,\n    age,\n    setBirth,\n  }\n\n  return(\n    <AgeContext.Provider value={value}>\n      {children}\n    </AgeContext.Provider>\n  )\n}\n\nexport const useAgeContext = () => React.useContext(AgeContext)","export const getRangeNumbers = (start: number, end: number) => {\n  let list = [] as number[];\n  for (let i = start; i <= end; i++) {\n    list.push(i);\n  }\n  return list;\n};\n\n// REF: https://stackoverflow.com/a/7091965/8842333\nexport const calcAge = (_birthday: string | Date) => {\n  const today = new Date();\n  const birthDate = new Date(_birthday);\n  let age = today.getFullYear() - birthDate.getFullYear();\n\n  const m = today.getMonth() - birthDate.getMonth();\n  if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {\n    age--;\n  }\n  return age;\n};\n","import React from \"react\";\nimport { AgeContextProvider } from \"./hooks/useAgeContext\";\nimport { MuiPickersUtilsProvider } from \"@material-ui/pickers\";\nimport DateFnsUtils from \"@date-io/date-fns\";\n\nexport const Provider: React.FC = ({ children }) => {\n  return (\n    <MuiPickersUtilsProvider utils={DateFnsUtils}>\n      <AgeContextProvider>{children}</AgeContextProvider>\n    </MuiPickersUtilsProvider>\n  );\n};\n","import React from \"react\";\nimport { DatePicker } from \"@material-ui/pickers\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Card from \"@material-ui/core/Card\";\n\nimport { useAgeContext } from \"../../hooks/useAgeContext\";\n\nexport const ProfileCard: React.FC = () => {\n  const { birth, age, setBirth } = useAgeContext();\n\n  const handleDateChange = React.useCallback(\n    (date: Date | null) => {\n      if (!date) return;\n      setBirth(date.toISOString());\n    },\n    [setBirth]\n  );\n\n  return (\n    <Card>\n      <Avatar alt=\"you\" />\n      <div>\n        <div>age:{age}</div>\n        <DatePicker\n          disableFuture\n          openTo=\"year\"\n          format=\"yyyy-MM-dd\"\n          label=\"Date of birth\"\n          views={[\"year\", \"month\", \"date\"]}\n          value={birth}\n          onChange={handleDateChange}\n        />\n      </div>\n    </Card>\n  );\n};\n","// field name\nexport const FIELD_NAME = {\n  H1: \"FIELD__H1\",\n  H2: \"FIELD__H2\",\n} as const;\n\n// keys\nexport const NAME_OF_STORY_ID = \"storyId\";\nexport const NAME_OF_ORDER = \"order\";\nexport const RESOURCE_NAME_KEY = \"RESOURCE_NAME_KEY\";\n\n// resouce ID\nexport const RESOURCE_ID__SHARED__AGE = \"RESOURCE_ID__SHARED__AGE\";\nexport const RESOURCE_ID__SHARED__LIMIT = \"RESOURCE_ID__SHARED__LIMIT\";\nexport const RESOURCE_ID__VISA__STUDY = \"RESOURCE_ID__VISA__STUDY\";\nexport const RESOURCE_ID__VISA__COOP = \"RESOURCE_ID__VISA__COOP\";\nexport const RESOURCE_ID__VISA__WORKING_HOLIDAY =\n  \"RESOURCE_ID__VISA__WORKING_HOLIDAY\";\nexport const RESOURCE_ID__STATUS__WORKER = \"RESOURCE_ID__STATUS__WORKER\";\nexport const RESOURCE_ID__STATUS__STUDENT = \"RESOURCE_ID__STATUS__STUDENT\";\nexport const RESOURCE_ID__ETC__CUSTOM = \"RESOURCE_ID__ETC__CUSTOM\";\nexport type RESOURCE_ID =\n  | typeof RESOURCE_ID__SHARED__AGE\n  | typeof RESOURCE_ID__SHARED__LIMIT\n  | typeof RESOURCE_ID__VISA__STUDY\n  | typeof RESOURCE_ID__VISA__COOP\n  | typeof RESOURCE_ID__VISA__WORKING_HOLIDAY\n  | typeof RESOURCE_ID__STATUS__WORKER\n  | typeof RESOURCE_ID__STATUS__STUDENT\n  | typeof RESOURCE_ID__ETC__CUSTOM;\n","import {\n  FIELD_NAME,\n  RESOURCE_ID__SHARED__AGE,\n  RESOURCE_ID__SHARED__LIMIT,\n  NAME_OF_STORY_ID,\n} from \"./settings\";\n\nconst DARK_BLUE = \"#00008b\";\n\nconst FIELD__H1__SHARED = \"SHARED\";\nconst FIELD__H1__VISA = \"VISA\";\nconst FIELD__H1__STATUS = \"STATUS\";\n\nexport const RESOURCE_TEMPLATE__VISA_STUDY = {\n  [FIELD_NAME[\"H1\"]]: FIELD__H1__VISA,\n  [FIELD_NAME[\"H2\"]]: \"Study VISA\",\n  eventBorderColor: DARK_BLUE,\n};\n\nexport const RESOURCE_TEMPLATE__VISA_COOP = {\n  [FIELD_NAME[\"H1\"]]: FIELD__H1__VISA,\n  [FIELD_NAME[\"H2\"]]: \"Co-op VISA\",\n  eventBorderColor: DARK_BLUE,\n};\n\nexport const RESOURCE_TEMPLATE__WORKING_HOLIDAY_COOP = {\n  [FIELD_NAME[\"H1\"]]: FIELD__H1__VISA,\n  [FIELD_NAME[\"H2\"]]: \"Working Holiday VISA\",\n  eventBorderColor: DARK_BLUE,\n};\n\nexport const RESOURCE_TEMPLATE__STUDENT_STATUS = {\n  [FIELD_NAME[\"H1\"]]: FIELD__H1__STATUS,\n  [FIELD_NAME[\"H2\"]]: \"Student\",\n  eventBorderColor: DARK_BLUE,\n};\n\nexport const RESOURCE_TEMPLATE__WORKER_STATUS = {\n  [FIELD_NAME[\"H1\"]]: FIELD__H1__STATUS,\n  [FIELD_NAME[\"H2\"]]: \"Worker\",\n  eventBorderColor: DARK_BLUE,\n};\n\nconst STORY_ID__ALL = \"ALL\";\n\nexport const DEPRECATED_SHARED__RESOURCES = [\n  // SHARED\n  {\n    id: RESOURCE_ID__SHARED__AGE,\n    [FIELD_NAME[\"H1\"]]: FIELD__H1__SHARED,\n    [FIELD_NAME[\"H2\"]]: \"Age\",\n    [NAME_OF_STORY_ID]: STORY_ID__ALL,\n    eventBorderColor: DARK_BLUE,\n  },\n  {\n    id: RESOURCE_ID__SHARED__LIMIT,\n    [FIELD_NAME[\"H1\"]]: FIELD__H1__SHARED,\n    [FIELD_NAME[\"H2\"]]: \"Working Holiday Application Limit\",\n    [NAME_OF_STORY_ID]: STORY_ID__ALL,\n    eventBorderColor: DARK_BLUE,\n  },\n];\n","import { v4 as uuidV4 } from \"uuid\";\n\nexport function uuid() {\n  return uuidV4();\n}\n","export const convertIsoToDateTime = (isoStr: string) => isoStr.split(\"T\")[0];\n","import { getRangeNumbers } from \"../../lib/age\";\nimport { addMonths, addYears } from \"date-fns\";\nimport { uuid } from \"../../lib/uuid\";\nimport { convertIsoToDateTime } from \"../../lib/date\";\nimport { EventInput } from \"@fullcalendar/react\";\nimport {\n  RESOURCE_ID__SHARED__AGE,\n  RESOURCE_ID__SHARED__LIMIT,\n} from \"../../constants/fullcalendar/settings\";\nimport { WORKING_HOLIDAY_APPLICATION_LIMITATION_AGE } from \"../../constants/visa\";\n\nconst getLastYear = () => {\n  const BUFFER_YEAR = 10;\n  const date = new Date();\n  return addYears(date, BUFFER_YEAR).getFullYear();\n};\n\nconst createWorkingHolidayLimitEvent = (birthday: Date) => {\n  const lastYearDate = addYears(\n    birthday,\n    WORKING_HOLIDAY_APPLICATION_LIMITATION_AGE\n  );\n  const endDate = addMonths(lastYearDate, +11);\n  const end = convertIsoToDateTime(endDate.toISOString());\n\n  const start = convertIsoToDateTime(birthday.toISOString());\n  const _event = {\n    id: uuid(),\n    resourceId: RESOURCE_ID__SHARED__LIMIT,\n    title: \"Limitation till WorkingHoliday\",\n    start,\n    end,\n  };\n  return _event;\n};\n\nexport const generateEvents = (startDate: Date) => {\n  // get year num\n  const endYear = getLastYear();\n  const startYear = new Date(startDate).getFullYear();\n\n  // create years list\n  const years = getRangeNumbers(startYear, endYear);\n\n  const workingHolidayLimitEvent = createWorkingHolidayLimitEvent(startDate);\n\n  // create EventInput obj\n  const ageEventList = years.map<EventInput>((year, index) => {\n    const start = (() => {\n      startDate.setFullYear(year);\n      const isoStr = startDate.toISOString();\n      const str = convertIsoToDateTime(isoStr);\n      return str;\n    })();\n\n    const isoStr = addMonths(new Date(start), +11).toISOString();\n    const end = convertIsoToDateTime(isoStr);\n\n    return {\n      id: uuid(),\n      resourceId: RESOURCE_ID__SHARED__AGE,\n      title: `Aage:${index}`,\n      start,\n      end,\n    };\n  });\n\n  return [workingHolidayLimitEvent, ...ageEventList];\n};\n","// working holiday have to be applied by age of 31.\nexport const WORKING_HOLIDAY_APPLICATION_LIMITATION_AGE = 31;\n","import { BaseStory } from \"./BaseStroy\";\nimport { uuid } from \"../../lib/uuid\";\nimport { addMonths, addYears, setMonth } from \"date-fns\";\nimport {\n  RESOURCE_TEMPLATE__VISA_STUDY,\n  RESOURCE_TEMPLATE__VISA_COOP,\n  RESOURCE_TEMPLATE__WORKING_HOLIDAY_COOP,\n  RESOURCE_TEMPLATE__STUDENT_STATUS,\n  RESOURCE_TEMPLATE__WORKER_STATUS,\n} from \"../../constants/fullcalendar/templates\";\nimport {\n  NAME_OF_STORY_ID,\n  NAME_OF_ORDER,\n} from \"../../constants/fullcalendar/settings\";\n\nconst VISA_BACKGROUND_COLOR = \"#8fbc8b\";\nconst STATUS_BACKGROUND_COLOR = \"#ffd700\";\nconst WH_WARN_BACKGROUND_COLOR = \"#e73758\";\n\nexport class CommunityCollegeAfterwardsWorkingHolidayStory\n  implements BaseStory {\n  private _periodMonths = 12 * 2 + 12 * 1; // schoolePeriod + WorkingholidayPeroid\n  private _events;\n  private _resources;\n  private _storyId;\n\n  constructor(startDate: Date) {\n    this._storyId = uuid();\n    const [resources, events] = this.createStory(this._storyId, startDate);\n    this._resources = resources;\n    this._events = events;\n  }\n\n  private createStory(storyId: string, startDate: Date) {\n    // Coop Visa\n    const coopVisaResourceId = uuid();\n    const coopVisaResource = {\n      ...RESOURCE_TEMPLATE__VISA_COOP,\n      id: coopVisaResourceId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 1,\n    };\n    const coopVisaEvent = {\n      id: uuid(),\n      resourceId: coopVisaResourceId,\n      start: startDate,\n      end: addMonths(startDate, 12 * 2),\n      [NAME_OF_ORDER]: 1,\n      backgroundColor: VISA_BACKGROUND_COLOR,\n    };\n\n    // StudyVisa\n    const studyVisaResourceId = uuid();\n    const studyVisaResource = {\n      ...RESOURCE_TEMPLATE__VISA_STUDY,\n      id: studyVisaResourceId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 2,\n    };\n    const studyVisaEvent = {\n      id: uuid(),\n      resourceId: studyVisaResourceId,\n      start: startDate,\n      end: addMonths(startDate, 12 * 2),\n      [NAME_OF_ORDER]: 2,\n      backgroundColor: VISA_BACKGROUND_COLOR,\n    };\n\n    // Working-holiday Visa\n    const workingholidayResourceId = uuid();\n    const workingholidayResource = {\n      ...RESOURCE_TEMPLATE__WORKING_HOLIDAY_COOP,\n      id: workingholidayResourceId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 3,\n    };\n    const dateAsStartWorkingHoliday = addMonths(startDate, 12 * 2);\n    const workingHolidayVisaEvent = {\n      id: uuid(),\n      resourceId: workingholidayResourceId,\n      start: dateAsStartWorkingHoliday,\n      end: addMonths(dateAsStartWorkingHoliday, 12 * 1),\n      [NAME_OF_ORDER]: 3,\n      backgroundColor: VISA_BACKGROUND_COLOR,\n    };\n    const preWorkingHolidayVisaEvent = {\n      id: uuid(),\n      resourceId: workingholidayResourceId,\n      start: setMonth(addYears(dateAsStartWorkingHoliday, -1), 8),\n      end: dateAsStartWorkingHoliday,\n      [NAME_OF_ORDER]: 3,\n      backgroundColor: WH_WARN_BACKGROUND_COLOR,\n    };\n\n    // student status\n    const studentStatusResourceId = uuid();\n    const studentStatusResource = {\n      ...RESOURCE_TEMPLATE__STUDENT_STATUS,\n      id: studentStatusResourceId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 4,\n    };\n    const studentStatusVisa = {\n      id: uuid(),\n      resourceId: studentStatusResourceId,\n      start: startDate,\n      end: addMonths(startDate, 12 * 2),\n      [NAME_OF_ORDER]: 4,\n      eventBackgroundCoor: STATUS_BACKGROUND_COLOR,\n    };\n\n    // worker status\n    const workerStatusResourceId = uuid();\n    const workerStatusResource = {\n      ...RESOURCE_TEMPLATE__WORKER_STATUS,\n      id: workerStatusResourceId,\n      [NAME_OF_STORY_ID]: storyId,\n      [NAME_OF_ORDER]: 5,\n    };\n    const workerStatusVisa = {\n      id: uuid(),\n      resourceId: workerStatusResourceId,\n      start: addMonths(startDate, 12 * 1),\n      end: addMonths(startDate, 12 * 3),\n      [NAME_OF_ORDER]: 5,\n      eventBackgroundCoor: STATUS_BACKGROUND_COLOR,\n    };\n\n    const resources = [\n      // visa\n      coopVisaResource,\n      studyVisaResource,\n      workingholidayResource,\n\n      // status\n      studentStatusResource,\n      workerStatusResource,\n    ];\n    const events = [\n      // visa\n      coopVisaEvent,\n      studyVisaEvent,\n      preWorkingHolidayVisaEvent,\n      workingHolidayVisaEvent,\n\n      // status\n      studentStatusVisa,\n      workerStatusVisa,\n    ];\n    return [resources, events] as const;\n  }\n\n  get events() {\n    return this._events;\n  }\n\n  get resources() {\n    return this._resources;\n  }\n\n  get periodMonths() {\n    return this._periodMonths;\n  }\n}\n","import { FIELD_NAME, NAME_OF_STORY_ID, NAME_OF_ORDER } from \"./settings\";\n\nexport const MY_TIME_LINE_NAME = \"MY_TIME_LINE_NAME\";\n\nexport const AGE_OF_START_STORY = 21;\n\nconst slotLabelFormat = [{ year: \"numeric\" }, { month: \"numeric\" }];\n\nconst headerToolbar = {\n  left: \"today prev,next\",\n  center: \"title\",\n  right: `${MY_TIME_LINE_NAME},listMonth`,\n} as const;\n\nconst initialView = { initialView: MY_TIME_LINE_NAME } as const;\n\nconst resourceGroupField = { resourceGroupField: NAME_OF_STORY_ID } as const;\n\nconst resourceAreaColumns = [\n  {\n    field: FIELD_NAME[\"H1\"],\n    headerContent: \"Category\",\n  },\n  {\n    field: FIELD_NAME[\"H2\"],\n    headerContent: \"Event\",\n  },\n];\n\nconst schedulerLicenseKey = {\n  schedulerLicenseKey: \"GPL-My-Project-Is-Open-Source\",\n} as const;\n\nconst views = {\n  [MY_TIME_LINE_NAME]: {\n    name: \"timeline\",\n    type: \"resourceTimelineYear\",\n    duration: { year: 15 },\n    buttonText: \"TIME_LINE\",\n  },\n} as const;\n\nconst nowIndicator = {\n  nowIndicator: true,\n} as const;\n\nconst resourceConfigs = {\n  resourceGroupLabelContent({ groupValue }: { groupValue: string }) {\n    return `Story [ID:${groupValue}]`;\n  },\n  resourceOrder: NAME_OF_ORDER,\n} as const;\n\nexport const FULL_CALENDAR_CONFIGS = {\n  resourceAreaColumns,\n  views,\n  headerToolbar,\n  slotLabelFormat,\n  ...initialView,\n  ...resourceGroupField,\n  ...schedulerLicenseKey,\n  ...nowIndicator,\n  ...resourceConfigs,\n} as const;\n","import React from \"react\";\nimport { addYears, addMonths } from \"date-fns\";\nimport { CommunityCollegeAfterwardsWorkingHolidayStory } from \"../core/story/CommunityCollegeAfterwardsWorkingHolidayStory\";\nimport { COMMUNITY_COLLEGE_EXAMPLE1 } from \"../constants/school\";\nimport { AGE_OF_START_STORY } from \"../constants/fullcalendar/options\";\nimport { WORKING_HOLIDAY_APPLICATION_LIMITATION_AGE } from \"../constants/visa\";\nimport { range } from \"../lib/util\";\n\ntype Story = any;\n\nconst addingNumbers = range(\n  AGE_OF_START_STORY,\n  WORKING_HOLIDAY_APPLICATION_LIMITATION_AGE\n);\n\nconst startMonths = COMMUNITY_COLLEGE_EXAMPLE1.startMonths;\n\nexport const useStoryList = () => {\n  const [stories, setStories] = React.useState<Story[]>([]);\n\n  const generate = React.useCallback((_birth: string) => {\n    const birth = new Date(_birth);\n\n    const startDates = addingNumbers\n      .map((num) => addYears(birth, num))\n      .flatMap((startDate) => {\n        const datesInYear = startMonths.map((month) =>\n          addMonths(startDate, month)\n        );\n        return datesInYear;\n      });\n\n    const _stories = startDates.map(\n      (startDate) =>\n        new CommunityCollegeAfterwardsWorkingHolidayStory(startDate)\n    );\n    setStories(_stories);\n  }, []);\n\n  return { stories, generate } as const;\n};\n","// REF: https://stackoverflow.com/a/15453499/8842333\nexport function range(start: number, stop: number, step?: number) {\n  var a = [start],\n    b = start;\n  while (b < stop) {\n    a.push((b += step || 1));\n  }\n  return a;\n}\n","export const COMMUNITY_COLLEGE_EXAMPLE1 = {\n  name: \"example college\",\n  startMonths: [1, 5, 9],\n} as const;\n","import React from \"react\";\nimport FullCalendarLib from \"@fullcalendar/react\";\nimport resourceTimelinePlugin from \"@fullcalendar/resource-timeline\";\nimport listPlugin from \"@fullcalendar/list\";\nimport interactionPlugin from \"@fullcalendar/interaction\";\nimport { useSharedStory } from \"../../hooks/useSharedStory\";\nimport { useStoryList } from \"../../hooks/useStoryList\";\nimport { useAgeContext } from \"../../hooks/useAgeContext\";\nimport { useEventsHandler } from \"../../hooks/useEventsHandler\";\nimport { FULL_CALENDAR_CONFIGS } from \"../../constants/fullcalendar/options\";\n\nexport const FullCalendar = () => {\n  const { birth } = useAgeContext();\n  const [sharedEvents, sharedResources, generateSharedEvents] = useSharedStory();\n  const { events, select, click, set: setEvents } = useEventsHandler();\n  const { stories, generate } = useStoryList();\n  \n  const storyResources = React.useMemo(() => stories.reduce((prev,story) => ([...prev, ...story.resources]), []), [stories]);\n  const storyEvents = React.useMemo(() => stories.reduce((prev, story) => ([...prev, ...story.events]), []), [stories]);\n\n  const _resources = React.useMemo(\n    () => [...sharedResources, ...storyResources],\n    [sharedResources, storyResources]\n  );\n\n  const _events = React.useMemo(() => [...sharedEvents, ...storyEvents], [\n    sharedEvents,\n    storyEvents,\n  ]);\n\n\n  React.useEffect(() => {\n    generate(birth);\n  }, [generate, birth]);\n\n  React.useEffect(() => {\n    setEvents(_events);\n  }, [_events, setEvents]);\n\n  React.useEffect(() => {\n    generateSharedEvents(birth);\n  }, [birth, generateSharedEvents]);\n\n  return (\n    <FullCalendarLib\n      selectable={true}\n      editable={true}\n      plugins={[interactionPlugin, resourceTimelinePlugin, listPlugin]}\n      events={events}\n      resources={_resources}\n      select={select}\n      eventClick={click}\n      {...FULL_CALENDAR_CONFIGS}\n      initialDate={\"2020-06-01\"}\n    />\n  );\n};\n","import { EventInput } from \"@fullcalendar/react\";\nimport React from \"react\";\nimport { DEPRECATED_SHARED__RESOURCES } from \"../constants/fullcalendar/templates\";\nimport { generateEvents } from \"../core/story/sharedStory\";\n\nexport const useSharedStory = () => {\n  const [events, setEvents] = React.useState<EventInput[]>([]);\n\n  const resources = DEPRECATED_SHARED__RESOURCES;\n\n  const _generateEvents = React.useCallback((birthday: string | Date) => {\n    const birthDate = new Date(birthday);\n    const _events = generateEvents(birthDate);\n    setEvents(_events);\n  }, []);\n\n  return [events, resources, _generateEvents] as const;\n};\n","import React from \"react\";\nimport { DateSelectArg, EventClickArg, EventInput } from \"@fullcalendar/react\";\nimport { uuid } from \"../lib/uuid\";\n\nexport const useEventsHandler = () => {\n  const [events, setEvents] = React.useState<EventInput[]>([]);\n\n  const select = React.useCallback((info: DateSelectArg) => {\n    if(!info.resource) return console.warn(\"Unexpected data that info does not have resource.\")\n    const newEvent = {\n      id: uuid(),\n      resourceId: info.resource.id,\n      start: info.startStr,\n      end: info.endStr,\n    };\n    setEvents((prev) => [...prev, newEvent]);\n  }, []);\n\n  const click = React.useCallback((info: EventClickArg) => {\n    if (!window.confirm(\"Would you like to remove this event?\")) return;\n    const id = info.event.id;\n    setEvents((prev) => prev.filter((e) => e.id !== id));\n  }, []);\n\n  return { events, select, click, set: setEvents };\n};\n","import React from \"react\";\nimport { ProfileCard } from \"../organisms/ProfileCard\";\nimport { FullCalendar } from \"../organisms/FullCalendar\";\n\nexport const CalendarPage: React.VFC = () => {\n  return (\n    <div>\n      <ProfileCard />\n      <hr />\n      <FullCalendar />\n    </div>\n  );\n};\n","import React from \"react\";\n\nimport { Provider } from \"./Provider\";\nimport {CalendarPage} from './components/pages/CalendarPage'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Provider>\n        <CalendarPage />\n      </Provider>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.warn))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}