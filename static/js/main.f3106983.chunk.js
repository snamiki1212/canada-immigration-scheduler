(this.webpackJsonpplangoab=this.webpackJsonpplangoab||[]).push([[0],{127:function(e,n,r){},128:function(e,n,r){},129:function(e,n,r){"use strict";r.r(n);var t=r(3),a=r(0),c=r.n(a),o=r(16),d=r.n(o),i=r(27),s=r(86);function u(e){var n=e.children;return Object(t.jsx)(i.a,{utils:s.a,children:n})}var l=r(20),b=r(21),j=r(166),f=r(173),v=r(157),O=r(161),I=r(167),p=r(169),h=r(12),y=r(28),x=r(81),m=Object(x.a)(new Date,-25).toISOString(),g=Object(y.b)({name:"user",initialState:{birthday:m,age:25,canWorkingholiday:!0},reducers:{updateBirthday:function(e,n){var r=n.payload.birthday;e.birthday=r,e.age=function(e){var n=new Date,r=new Date(e),t=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return(a<0||0===a&&n.getDate()<r.getDate())&&t--,t}(r)},toggleWorkingholiday:function(e,n){e.canWorkingholiday=!e.canWorkingholiday}}}),C=g.actions,k=C.updateBirthday,S=C.toggleWorkingholiday,w=g.reducer,E=function(e){return e.features.user},M=function(){var e=Object(h.b)(),n=c.a.useCallback((function(n){return e(k({birthday:n}))}),[e]),r=c.a.useCallback((function(){e(S())}),[e]),t=Object(h.c)(E);return{birth:t.birthday,age:t.age,setBirth:n,toggleWorkingholiday:r,canWorkingholiday:t.canWorkingholiday}};function D(){var e=Object(l.a)(["\n  display: flex;\n  gap: 1rem;\n  padding: 2rem;\n"]);return D=function(){return e},e}function L(){var e=M(),n=e.birth,r=e.age,a=e.setBirth,o=e.toggleWorkingholiday,d=e.canWorkingholiday,i=c.a.useCallback((function(e){e&&a(e.toISOString())}),[a]),s=c.a.useCallback((function(){o()}),[o]);return Object(t.jsx)(v.a,{children:Object(t.jsxs)(O.a,{children:[Object(t.jsx)("h2",{children:"Profile"}),Object(t.jsxs)(P,{children:[Object(t.jsx)(f.a,{alt:"you"}),Object(t.jsx)(I.a,{id:"age-text",label:"Your Age",disabled:!0,InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},type:"number",value:r}),Object(t.jsx)(j.a,{disableFuture:!0,openTo:"year",format:"yyyy-MM-dd",label:"Date of birth",views:["year","month","date"],value:n,onChange:i}),Object(t.jsxs)("div",{children:[Object(t.jsx)("span",{children:"with working holiday"}),Object(t.jsx)(p.a,{checked:d,onChange:s})]})]})]})})}var P=b.a.div(D()),R=r(172),T=r(163),F=r(13),A=r(88),W=r(87),_=r(91),N=r(92),H=r(8),G="FIELD1",B="FIELD2",Y="storyId",V="order",U="MY_CALENDAR_ID",z="RESOURCE_ID__SHARED__AGE",J="RESOURCE_ID__SHARED__LIMIT",K="MY_TIME_LINE_NAME",$={left:"today prev,next",center:"title",right:"".concat(K,",listMonth")},q={initialView:K},Q={resourceGroupField:Y},X=Object(H.a)({},K,{type:"resourceTimelineYear",duration:{year:15},buttonText:"TIME_LINE"}),Z={resourceOrder:V,resourcesInitiallyExpanded:!1},ee=Object(F.a)(Object(F.a)(Object(F.a)(Object(F.a)(Object(F.a)({views:X,headerToolbar:$,slotLabelFormat:[{year:"numeric"},{month:"numeric"}]},q),Q),{schedulerLicenseKey:"GPL-My-Project-Is-Open-Source"}),{nowIndicator:!0}),Z);function ne(e){return Object(t.jsx)(A.a,Object(F.a)(Object(F.a)({},ee),{},{plugins:[N.a,W.a,_.a]},e))}function re(e){return Object(t.jsx)(ne,Object(F.a)(Object(F.a)({},e),{}))}var te=r(56),ae="COMMUNITY_COLLEGE";var ce,oe,de,ie,se,ue=r(36),le=r(89),be="#00008b",je="VISA",fe="STATUS",ve=(ce={},Object(H.a)(ce,G,je),Object(H.a)(ce,B,"Study VISA"),Object(H.a)(ce,"eventBorderColor",be),ce),Oe=(oe={},Object(H.a)(oe,G,je),Object(H.a)(oe,B,"Co-op VISA"),Object(H.a)(oe,"eventBorderColor",be),oe),Ie=(de={},Object(H.a)(de,G,je),Object(H.a)(de,B,"Working Holiday VISA"),Object(H.a)(de,"eventBorderColor",be),de),pe=(ie={},Object(H.a)(ie,G,fe),Object(H.a)(ie,B,"Student"),Object(H.a)(ie,"eventBorderColor",be),ie),he=(se={},Object(H.a)(se,G,fe),Object(H.a)(se,B,"Worker"),Object(H.a)(se,"eventBorderColor",be),se),ye=r(171);function xe(){return Object(ye.a)()}var me=function(e){return e.split("T")[0]},ge=function(e){var n=null!==e&&void 0!==e?e:{},r=n.id,t=n.calendarId,a=n.resourceId,c=n.storyId,o=n.title,d=n.start,i=n.end,s=null!==c&&void 0!==c?c:xe(),u=null!==a&&void 0!==a?a:xe(),l=null!==o&&void 0!==o?o:"New Event";return{id:null!==r&&void 0!==r?r:xe(),resourceId:u,storyId:s,title:l,start:null!==d&&void 0!==d?d:(new Date).toISOString(),end:null!==i&&void 0!==i?i:(new Date).toISOString(),extendedProps:{calendarId:t,storyId:s,resourceId:u}}},Ce=function(e){var n,r=null!==e&&void 0!==e?e:{},t=r.id,a=r.calendarId,c=r.storyId;return n={id:null!==t&&void 0!==t?t:xe(),calendarId:null!==a&&void 0!==a?a:xe()},Object(H.a)(n,Y,null!==c&&void 0!==c?c:xe()),Object(H.a)(n,V,1),Object(H.a)(n,G,"Field1"),Object(H.a)(n,B,"Field2"),n},ke=function(e){return"from "+(n=e.toISOString(),me(n).replace(/-[0-9][0-9]$/,""));var n},Se="#8fbc8b",we="#ffd700",Ee=function(e){var n,r,t,a,c,o,d=e.calendarId,i=e.storyId,s=e.startDate,u=e.canWorkingholiday,l=[],b=[],j=xe();l.push(Object(F.a)(Object(F.a)({},Oe),{},(c={id:j,calendarId:d},Object(H.a)(c,Y,i),Object(H.a)(c,V,1),c))),b.push((o={id:xe(),resourceId:j,storyId:i,start:s.toISOString(),end:Object(te.a)(s,24).toISOString()},Object(H.a)(o,V,1),Object(H.a)(o,"backgroundColor",Se),Object(H.a)(o,"extendedProps",{resourceId:j,calendarId:d,storyId:i}),o));var f=xe();if(l.push(Object(F.a)(Object(F.a)({},ve),{},(n={id:f,calendarId:d},Object(H.a)(n,Y,i),Object(H.a)(n,V,2),n))),b.push((r={id:xe(),resourceId:f,storyId:i,start:s.toISOString(),end:Object(te.a)(s,24).toISOString()},Object(H.a)(r,V,2),Object(H.a)(r,"backgroundColor",Se),Object(H.a)(r,"extendedProps",{resourceId:f,calendarId:d,storyId:i}),r)),u){var v,O,I,p,h,y=xe();l.push(Object(F.a)(Object(F.a)({},Ie),{},(v={id:y,calendarId:d},Object(H.a)(v,Y,i),Object(H.a)(v,V,3),v)));var m=Object(te.a)(s,24);b.push((O={id:xe(),resourceId:y,storyId:i,start:m.toISOString(),end:Object(te.a)(m,12).toISOString()},Object(H.a)(O,V,3),Object(H.a)(O,"backgroundColor",Se),Object(H.a)(O,"extendedProps",{resourceId:y,calendarId:d,storyId:i}),O)),b.push((I={id:xe(),resourceId:y,storyId:i,start:Object(le.a)(Object(x.a)(m,-1),8).toISOString(),end:m.toISOString()},Object(H.a)(I,V,3),Object(H.a)(I,"backgroundColor","#e73758"),Object(H.a)(I,"extendedProps",{resourceId:y,calendarId:d,storyId:i}),I));var g=xe();l.push(Object(F.a)(Object(F.a)({},he),{},(p={id:g,calendarId:d},Object(H.a)(p,Y,i),Object(H.a)(p,V,5),p))),b.push((h={id:xe(),resourceId:g,storyId:i,start:Object(te.a)(s,12).toISOString(),end:Object(te.a)(s,36).toISOString()},Object(H.a)(h,V,5),Object(H.a)(h,"eventBackgroundCoor",we),Object(H.a)(h,"extendedProps",{resourceId:g,calendarId:d,storyId:i}),h))}var C=xe();return l.push(Object(F.a)(Object(F.a)({},pe),{},(t={id:C,calendarId:d},Object(H.a)(t,Y,i),Object(H.a)(t,V,4),t))),b.push((a={id:xe(),resourceId:C,storyId:i,start:s.toISOString(),end:Object(te.a)(s,24).toISOString()},Object(H.a)(a,V,4),Object(H.a)(a,"eventBackgroundCoor",we),Object(H.a)(a,"extendedProps",{resourceId:C,calendarId:d,storyId:i}),a)),[[].concat(l),[].concat(b)]},Me=[1,5,9],De=function(e,n,r){for(var t=[e],a=e;a<n;)t.push(a+=r||1);return t}(21,31),Le=function(e){var n=e.birth,r=e.calendarId,t=e.canWorkingholiday;return De.map((function(e){return Object(x.a)(n,e)})).flatMap((function(e){return Me.map((function(n){return Object(te.a)(e,n)}))})).map((function(e){return function(e){var n=e.startDate,r=e.calendarId,t=e.canWorkingholiday,a=xe(),c=ke(n),o=Ee({calendarId:r,storyId:a,startDate:n,canWorkingholiday:t}),d=Object(ue.a)(o,2),i=d[0];return{id:a,calendarId:r,name:c,events:d[1],resources:i}}({startDate:e,calendarId:r,canWorkingholiday:t})}))},Pe=Object(y.b)({name:"templateCalendarTable",initialState:Object(H.a)({},ae,void 0),reducers:{upsertPrivateCollegeStories:function(e,n){var r=n.payload,t=r.birth,a=r.canWorkingholiday,c=function(e){var n=e.birth,r=e.canWorkingholiday,t=Le({birth:n,calendarId:ae,canWorkingholiday:r});return{id:ae,stories:t}}({birth:new Date(t),canWorkingholiday:a});e.COMMUNITY_COLLEGE=c}}}),Re=Pe.reducer,Te=Pe.actions.upsertPrivateCollegeStories,Fe=function(e){return e.features.templateCalendar.COMMUNITY_COLLEGE},Ae=Object(y.b)({name:"userCalendars",initialState:{calendars:[]},reducers:{updateCalendars:function(e,n){var r=n.payload.calendars;e.calendars=r},pushResource:function(e,n){var r=n.payload,t=r.calendarId,a=r.storyId,c=r.resource,o=e.calendars.findIndex((function(e){return e.id===t}));if(-1===o)console.warn("cannot find calendar on updateResource",t);else{var d=e.calendars[o].stories.findIndex((function(e){return e.id===a}));-1===d?console.warn("cannot find story on updateResource",t):e.calendars[o].stories[d].resources.push(c)}},updateResource:function(e,n){var r=n.payload,t=r.calendarId,a=r.storyId,c=r.newResource,o=e.calendars.findIndex((function(e){return e.id===t}));if(-1===o)console.warn("cannot find calendar on updateResource",t);else{var d=e.calendars[o].stories.findIndex((function(e){return e.id===a}));if(-1===d)console.warn("cannot find story on updateResource",t);else{var i=e.calendars[o].stories[d].resources.findIndex((function(e){return e.id===c.id}));-1===i?console.warn("cannot find resource on updateResource",t):e.calendars[o].stories[d].resources[i]=c}}},removeResource:function(e,n){var r=n.payload,t=r.calendarId,a=r.resourceId,c=r.storyId,o=e.calendars.findIndex((function(e){return e.id===t}));if(-1===o)console.warn("cannot find calendar on removeResource",t);else{var d=e.calendars[o].stories.findIndex((function(e){return e.id===c}));-1===d?console.warn("cannot find story on removeResource",t):e.calendars[o].stories[d].resources=e.calendars[o].stories[d].resources.filter((function(e){return e.id!==a}))}},addStory:function(e,n){var r=n.payload,t=r.calendarId,a=r.story,c=e.calendars.findIndex((function(e){return e.id===t}));-1===c?console.warn("cannot find calendar on addStory",t):e.calendars[c].stories.push(a)},removeStory:function(e,n){var r=n.payload,t=r.calendarId,a=r.storyId,c=e.calendars.findIndex((function(e){return e.id===t}));-1===c?console.warn("cannot find calendar on removeStory",t):e.calendars[c].stories=e.calendars[c].stories.filter((function(e){return e.id!==a}))},updateStory:function(e,n){var r=n.payload,t=r.calendarId,a=r.storyId,c=r.newStory,o=e.calendars.findIndex((function(e){return e.id===t}));if(-1===o)console.warn("cannot find calendar on updateStory",t);else{var d=e.calendars[o].stories.findIndex((function(e){return e.id===a}));-1===d?console.warn("cannot find story on updateStory",t):e.calendars[o].stories[d]=c}},addEvent:function(e,n){var r=n.payload,t=r.calendarId,a=r.storyId,c=r.event,o=e.calendars.findIndex((function(e){return e.id===t}));if(-1===o)console.warn("cannot find calendar on addEvent",t);else{var d=e.calendars[o].stories.findIndex((function(e){return e.id===a}));-1===d?console.warn("cannot find story on addEvent",t):e.calendars[o].stories[d].events.push(c)}},removeEvent:function(e,n){var r=n.payload,t=r.calendarId,a=r.storyId,c=r.eventId,o=e.calendars.findIndex((function(e){return e.id===t}));if(-1===o)console.warn("cannot find calendar on removeEvent",t);else{var d=e.calendars[o].stories.findIndex((function(e){return e.id===a}));-1===d?console.warn("cannot find story on removeEvent",d):e.calendars[o].stories[d].events=e.calendars[o].stories[d].events.filter((function(e){return e.id!==c}))}},updateEvent:function(e,n){var r=n.payload,t=r.calendarId,a=r.storyId,c=r.eventId,o=r.newEvent,d=e.calendars.findIndex((function(e){return e.id===t}));if(-1===d)console.warn("cannot find calendar on updateStory",t);else{var i=e.calendars[d].stories.findIndex((function(e){return e.id===a}));if(-1===i)console.warn("cannot find story on updateStory",t);else{var s=e.calendars[d].stories[i].events.findIndex((function(e){return e.id===c}));-1===s?console.warn("cannot find event on updateEvent"):e.calendars[d].stories[i].events[s]=o}}}}}),We=Ae.actions,_e=We.updateCalendars,Ne=We.pushResource,He=We.updateResource,Ge=We.removeResource,Be=We.addStory,Ye=We.removeStory,Ve=We.updateStory,Ue=We.addEvent,ze=We.removeEvent,Je=We.updateEvent,Ke=Ae.reducer,$e=function(e){return e.features.userCalendars.calendars[0]},qe={selectable:!1,editable:!1},Qe=[{field:G,headerContent:"Category"},{field:B,headerContent:"Event"}];function Xe(e){var n=Object(h.b)(),r=function(e){var n=e.createClickHandel,r=Object(h.c)(Fe);return{resourceGroupLabelContent:c.a.useCallback((function(e){var t=e.groupValue;if(r){var a=r.stories.find((function(e){return e.id===t}));if(a){var c;a.name?c=a.name:(console.warn("cannot find this story name",t),c="No Name");var o=n({calendarId:U,story:a}),d=document.createElement("i");d.innerHTML=c+" ";var i=document.createElement("button");return i.innerHTML="copy",i.onclick=o,{domNodes:[d,i]}}console.warn("cannot find story",t)}}),[r,n])}}({createClickHandel:c.a.useCallback((function(e){var r=e.story,t=e.calendarId;return function(){window.confirm("Copy to my calendar?")&&n(Be({calendarId:t,story:r}))}}),[n])}).resourceGroupLabelContent;return Object(t.jsx)(re,Object(F.a)(Object(F.a)({},e),{},{initialDate:"2020-06-01",resourceGroupLabelContent:r,resourceAreaColumns:Qe},qe))}var Ze=r(18);function en(){var e=M(),n=e.birth,r=e.canWorkingholiday,a=function(){var e=Object(h.b)(),n=c.a.useCallback((function(n){var r=n.birth,t=n.canWorkingholiday;e(Te({birth:r,canWorkingholiday:t}))}),[e]),r=Object(h.c)(Fe),t=c.a.useMemo((function(){var e;return null!==(e=null===r||void 0===r?void 0:r.stories)&&void 0!==e?e:[]}),[r]),a=c.a.useMemo((function(){return t.reduce((function(e,n){return[].concat(Object(Ze.a)(e),Object(Ze.a)(n.resources))}),[])}),[t]),o=c.a.useMemo((function(){return t.reduce((function(e,n){return[].concat(Object(Ze.a)(e),Object(Ze.a)(n.events))}),[])}),[t]);return{stories:t,generate:n,resources:a,events:o}}(),o=a.resources,d=a.events,i=a.generate;return c.a.useEffect((function(){i({birth:n,canWorkingholiday:r})}),[i,n,r]),Object(t.jsx)(Xe,{events:d,resources:o})}var nn=function(e){var n=c.a.useState(!!e),r=Object(ue.a)(n,2),t=r[0],a=r[1];return{isOpen:t,open:c.a.useCallback((function(){a(!0)}),[]),close:c.a.useCallback((function(){a(!1)}),[]),toggle:c.a.useCallback((function(){a((function(e){return!e}))}),[])}};function rn(){var e=Object(l.a)([""]);return rn=function(){return e},e}function tn(){var e=Object(l.a)(["\n  display: inline-block;\n  margin-right: 0.5rem;\n"]);return tn=function(){return e},e}function an(){return Object(t.jsxs)(on,{children:[Object(t.jsx)("h2",{children:"Options(TODO: not working yet)"}),Object(t.jsxs)("div",{children:[Object(t.jsx)("label",{children:"School Period(Month)"}),Object(t.jsx)("input",{type:"range",min:"0",max:60,id:"schoolPeriod"})]}),Object(t.jsxs)("div",{children:[Object(t.jsx)("label",{children:"Co-op Period(Month)"}),Object(t.jsx)("input",{type:"range",min:"0",max:60,id:"schoolPeriod"})]}),Object(t.jsxs)("div",{children:[Object(t.jsx)("span",{children:"Start From (Month)"}),Object(t.jsx)("span",{children:Array.from({length:12}).map((function(e,n){var r=n+1;return Object(t.jsxs)(cn,{children:[Object(t.jsx)("label",{children:r}),Object(t.jsx)("input",{type:"checkbox",value:r})]})}))})]})]})}var cn=b.a.div(tn()),on=b.a.div(rn());function dn(){var e=Object(l.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 2rem;\n"]);return dn=function(){return e},e}function sn(){var e=Object(l.a)(["\n  display: grid;\n  gap: 2rem;\n  padding: 3rem;\n"]);return sn=function(){return e},e}function un(){var e=Object(l.a)(["\n  display: flex;\n"]);return un=function(){return e},e}function ln(){var e=nn(),n=e.open,r=e.close,a=e.isOpen;return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(v.a,{children:Object(t.jsxs)(O.a,{children:[Object(t.jsx)("h2",{children:"Templates"}),Object(t.jsxs)(bn,{children:[Object(t.jsx)(T.a,{variant:"contained",onClick:n,children:"Private College"}),Object(t.jsx)(T.a,{disabled:!0,variant:"contained",children:"TODO: Public College"}),Object(t.jsx)(T.a,{disabled:!0,variant:"contained",children:"TODO: ESL"})]}),Object(t.jsx)(an,{})]})}),Object(t.jsx)(R.a,{fullScreen:!0,open:a,onClose:r,children:Object(t.jsxs)(jn,{children:[Object(t.jsx)("button",{onClick:r,children:"Close"}),Object(t.jsxs)(fn,{children:[Object(t.jsx)(L,{}),Object(t.jsx)(an,{})]}),Object(t.jsx)(en,{})]})})]})}var bn=b.a.div(un()),jn=b.a.div(sn()),fn=b.a.div(dn()),vn=function(e){var n,r,t=e.calendarId,a=e.storyId;return[(n={id:z},Object(H.a)(n,G,""),Object(H.a)(n,B,"Age"),Object(H.a)(n,Y,a),Object(H.a)(n,V,0),Object(H.a)(n,"calendarId",t),Object(H.a)(n,"eventBorderColor",be),n),(r={id:J},Object(H.a)(r,G,""),Object(H.a)(r,B,"Working Holiday Application Limit"),Object(H.a)(r,Y,a),Object(H.a)(r,V,1),Object(H.a)(r,"calendarId",t),Object(H.a)(r,"eventBorderColor",be),r)]},On=function(e){var n=e.startDate,r=e.storyId,t=e.calendarId,a=function(e,n){for(var r=[],t=e;t<=n;t++)r.push(t);return r}(new Date(n).getFullYear(),In()),c=pn(n,r,t),o=a.map((function(e,a){var c=function(){n.setFullYear(e);var r=n.toISOString();return me(r)}(),o=Object(te.a)(new Date(c),11).toISOString(),d=me(o);return{id:xe(),title:"Aage:".concat(a),start:c,end:d,storyId:r,resourceId:z,extendedProps:{resourceId:z,calendarId:t,storyId:r}}}));return[].concat(Object(Ze.a)(c),Object(Ze.a)(o))},In=function(){var e=new Date;return Object(x.a)(e,10).getFullYear()},pn=function(e,n,r){var t=Object(x.a)(e,31),a=me(e.toISOString()),c=Object(te.a)(t,11),o=me(c.toISOString()),d=me(Object(x.a)(Object(le.a)(c,6),-1).toISOString());return[{id:xe(),title:"Limitation till WorkingHoliday",start:a,end:o,resourceId:J,storyId:n,extendedProps:{resourceId:J,storyId:n,calendarId:r}},{id:xe(),title:"Application Limit",start:a,end:d,storyId:n,resourceId:J,extendedProps:{storyId:n,resourceId:J,calendarId:r}}]},hn=function(){var e=Object(h.b)(),n=Object(h.c)($e),r=c.a.useCallback((function(n){var r,t=U,a=function(e){var n=e.birth,r=e.calendarId,t=new Date(n),a="PROFILE_ID";return{id:a,calendarId:r,name:ke(t),resources:vn({calendarId:r,storyId:a}),events:On({calendarId:r,storyId:a,startDate:t})}}({birth:n,calendarId:t}),c={id:(r={id:t,stories:[a]}).id,stories:r.stories};e(_e({calendars:[c]}))}),[e]),t=c.a.useCallback((function(n){if(n.resource){var r=n.resource.extendedProps.storyId;if(r){var t=n.resource.extendedProps.calendarId;if(t){var a=ge({id:xe(),resourceId:n.resource.id,calendarId:t,storyId:r,start:n.startStr,end:n.endStr});e(Ue({event:a,calendarId:t,storyId:r}))}else console.warn("Unexpected data not including calendarId.")}else console.warn("Unexpected data not including storyId.")}else console.warn("Unexpected data that info does not have resource.")}),[e]),a=c.a.useMemo((function(){var e;return null!==(e=null===n||void 0===n?void 0:n.stories)&&void 0!==e?e:[]}),[n]),o=c.a.useMemo((function(){var e;return null!==(e=null===n||void 0===n?void 0:n.stories.flatMap((function(e){return e.events})))&&void 0!==e?e:[]}),[n]),d=c.a.useMemo((function(){var e;return null!==(e=null===n||void 0===n?void 0:n.stories.flatMap((function(e){return e.resources})))&&void 0!==e?e:[]}),[n]);return{calendar:n,stories:a,events:o,resources:d,init:r,select:t}},yn=function(){var e=Object(h.b)();return{remove:c.a.useCallback((function(n){var r=n.calendarId,t=n.storyId;window.confirm("Do you remove this story?")&&e(Ye({storyId:t,calendarId:r}))}),[e]),update:c.a.useCallback((function(n,r,t){var a=function(e,n){return Object(F.a)(Object(F.a)({},e),n)}(r,t);e(Ve(Object(F.a)(Object(F.a)({},n),{},{newStory:a})))}),[e]),create:c.a.useCallback((function(n,r){var t=n.calendarId,a=function(e){var n=null!==e&&void 0!==e?e:{},r=n.id,t=n.calendarId,a=n.events,c=n.resources,o=n.name,d=null!==r&&void 0!==r?r:xe(),i=null!==t&&void 0!==t?t:xe(),s=xe();return{id:d,calendarId:i,events:null!==a&&void 0!==a?a:[ge({id:s,storyId:d})],resources:null!==c&&void 0!==c?c:[Ce({calendarId:i,storyId:d})],name:null!==o&&void 0!==o?o:"No Name"}}({calendarId:t});e(Be({calendarId:t,story:a}))}),[e])}},xn=Object(y.b)({name:"resourceModal",initialState:{resource:null},reducers:{push:function(e,n){var r=n.payload;e.resource=r},pop:function(e,n){e.resource=null}}}),mn=function(e){return!!e.ui.resourceModal.resource},gn=function(e){return e.ui.resourceModal.resource},Cn=function(e){var n=e.ui.resourceModal.resource;if(!n)return null;var r=n.calendarId,t=n.storyId,a=n.resourceId,c=e.features.userCalendars.calendars.findIndex((function(e){return e.id===r}));if(-1===c)console.warn("cannot find calendar on removeResource",r);else{var o=e.features.userCalendars.calendars[c].stories.findIndex((function(e){return e.id===t}));if(!(-1===o))return e.features.userCalendars.calendars[c].stories[o].resources.find((function(e){return e.id===a}));console.warn("cannot find story on removeResource",r)}},kn=xn.actions,Sn=kn.push,wn=kn.pop,En=xn.reducer,Mn=Object(y.b)({name:"storyModal",initialState:{story:null},reducers:{push:function(e,n){var r=n.payload;e.story=r},pop:function(e,n){e.story=null}}}),Dn=function(e){return!!e.ui.storyModal.story},Ln=function(e){return e.ui.storyModal.story},Pn=function(e){var n=e.ui.storyModal.story;if(!n)return null;var r=n.calendarId,t=n.storyId,a=e.features.userCalendars.calendars.findIndex((function(e){return e.id===r}));if(-1!==a)return e.features.userCalendars.calendars[a].stories.find((function(e){return e.id===t}));console.warn("cannot find calendar on removeStory",r)},Rn=Mn.actions,Tn=Rn.push,Fn=Rn.pop,An=Mn.reducer,Wn=Object(y.b)({name:"eventModal",initialState:{event:null},reducers:{push:function(e,n){var r=n.payload;e.event=r},pop:function(e,n){e.event=null}}}),_n=function(e){return!!e.ui.eventModal.event},Nn=function(e){return e.ui.eventModal.event},Hn=function(e){var n=e.ui.eventModal.event;if(!n)return null;var r=n.calendarId,t=n.storyId,a=n.eventId,c=e.features.userCalendars.calendars.findIndex((function(e){return e.id===r}));if(-1===c)console.warn("cannot find calendar on removeResource",r);else{var o=e.features.userCalendars.calendars[c].stories.findIndex((function(e){return e.id===t}));if(!(-1===o))return e.features.userCalendars.calendars[c].stories[o].events.find((function(e){return e.id===a}));console.warn("cannot find story on removeResource",r)}},Gn=Wn.actions,Bn=Gn.push,Yn=Gn.pop,Vn=Wn.reducer,Un=r(165),zn=r(162),Jn=r(52),Kn=function(){var e=Object(h.b)(),n=Object(h.c)(Cn),r=Object(h.c)($e),t=c.a.useCallback((function(n){var t=n.calendarId,a=n.storyId,c=r.stories.findIndex((function(e){return e.id===a}));if(-1===c)console.warn("cannot find story on updateResource",t);else{for(var o=r.stories[c].resources,d={idx:-1,order:-1},i=0;i<o.length;i++){var s,u=null!==(s=o[i].order)&&void 0!==s?s:-1;u>d.order&&(d={idx:i,order:u})}var l=Ce({calendarId:t,storyId:a,order:d.order+1});e(Ne({calendarId:t,storyId:a,resource:l}))}}),[e,r]);return{remove:c.a.useCallback((function(n){var r=n.calendarId,t=n.resourceId,a=n.storyId;window.confirm("Do you remove this resource?")&&e(Ge({resourceId:t,storyId:a,calendarId:r}))}),[e]),update:c.a.useCallback((function(r,t){var a=r.calendarId,c=r.storyId;if(!n)return console.warn("Invalid data status when to update resource.");var o=function(e,n){var r=n.order,t=n.FIELD1,a=n.FIELD2;return Object.assign(Object(F.a)({},e),void 0!==r&&Object(H.a)({},"order",r),void 0!==t&&Object(H.a)({},"FIELD1",t),void 0!==a&&Object(H.a)({},"FIELD2",a))}(n,t);e(He({calendarId:a,storyId:c,newResource:o}))}),[e,n]),push:t}};function $n(e){var n,r,a=e.isOpen,o=e.onClose,d=Object(h.c)(gn),i=Object(h.c)(Cn),s=null!==(n=i&&i.FIELD1)&&void 0!==n?n:"",u=null!==(r=i&&i.FIELD2)&&void 0!==r?r:"",l=Kn(),b=l.remove,j=l.update,f=c.a.useCallback((function(){if(!d)return console.warn("Invalid data status when to update resource.");b(d),o()}),[d,b,o]),v=c.a.useCallback((function(e){if(!d)return console.warn("Invalid data status when to remove resource.");j(d,e),o()}),[d,j,o]),O=Object(Jn.a)(),I=O.register,p=O.handleSubmit;return Object(t.jsxs)(R.a,{onClose:o,open:a,children:[Object(t.jsx)(Un.a,{children:"Resource"}),Object(t.jsxs)(zn.a,{dividers:!0,children:[Object(t.jsxs)("form",{onSubmit:p(v),children:[Object(t.jsx)("input",{ref:I,name:G,defaultValue:s}),Object(t.jsx)("input",{ref:I,name:B,defaultValue:u}),Object(t.jsx)("input",{type:"submit",value:"Update"})]}),Object(t.jsx)("hr",{}),Object(t.jsx)("button",{onClick:f,children:"Remove"})]})]})}function qn(e){var n=e.isOpen,r=e.onClose,a=Object(h.c)(Ln),o=Object(h.c)(Pn),d=yn(),i=d.remove,s=d.update,u=Kn().push,l=c.a.useCallback((function(){if(!a)return console.warn("Invalid data status when to update resource.");i(a),r()}),[a,i,r]),b=c.a.useCallback((function(){if(!a)return console.warn("Invalid data status when to add resource.");u(a),r()}),[a,u,r]),j=Object(Jn.a)(),f=j.register,v=j.handleSubmit,O=c.a.useCallback((function(e){if(!a||!o)return console.warn("Invalid data status when to update story.");s(a,o,e),r()}),[s,a,o,r]);return Object(t.jsxs)(R.a,{onClose:r,open:n,children:[Object(t.jsx)(Un.a,{children:"Resource"}),Object(t.jsxs)(zn.a,{dividers:!0,children:[Object(t.jsxs)("form",{onSubmit:v(O),children:[Object(t.jsx)("input",{ref:f,name:"name",defaultValue:null===o||void 0===o?void 0:o.name}),Object(t.jsx)("input",{type:"submit",value:"rename"})]}),Object(t.jsx)("button",{onClick:l,children:"remove"}),Object(t.jsx)("button",{onClick:b,children:"add resource"})]})]})}var Qn=function(){var e=Object(h.b)();return{remove:c.a.useCallback((function(n){var r=n.calendarId,t=n.storyId,a=n.eventId;window.confirm("Do you remove this story?")&&e(ze({calendarId:r,storyId:t,eventId:a}))}),[e]),update:c.a.useCallback((function(n,r,t){var a=function(e,n){var r=n.title;return Object.assign(Object(F.a)({},e),void 0!==r&&{title:r})}(r,t);e(Je(Object(F.a)(Object(F.a)({},n),{},{newEvent:a})))}),[e])}};function Xn(e){var n=e.isOpen,r=e.onClose,a=Object(h.c)(Nn),o=Object(h.c)(Hn),d=Qn(),i=d.remove,s=d.update,u=c.a.useCallback((function(){if(!a)return console.warn("Invalid data status when to update event.");i(a),r()}),[a,i,r]),l=c.a.useCallback((function(e){if(!a||!o)return console.warn("Invalid data status when to remove event.");s(a,o,e),r()}),[a,o,s,r]),b=Object(Jn.a)(),j=b.register,f=b.handleSubmit;return Object(t.jsxs)(R.a,{onClose:r,open:n,children:[Object(t.jsx)(Un.a,{children:"Resource"}),Object(t.jsxs)(zn.a,{dividers:!0,children:[Object(t.jsxs)("form",{onSubmit:f(l),children:[Object(t.jsx)("input",{ref:j,name:"title",defaultValue:null===o||void 0===o?void 0:o.title}),Object(t.jsx)("input",{type:"submit",value:"rename"})]}),Object(t.jsx)("hr",{}),Object(t.jsx)("button",{onClick:u,children:"Remove"})]})]})}var Zn={selectable:!0,editable:!0};function er(){var e=function(){var e=Object(h.b)();return{push:c.a.useCallback((function(n){var r=n.resourceId,t=n.storyId,a=n.calendarId;e(Sn({calendarId:a,resourceId:r,storyId:t}))}),[e]),pop:c.a.useCallback((function(){e(wn())}),[e]),isOpen:Object(h.c)(mn)}}(),n=e.push,r=e.pop,a=e.isOpen,o=function(){var e=Object(h.b)();return{push:c.a.useCallback((function(n){var r=n.storyId,t=n.calendarId;e(Tn({calendarId:t,storyId:r}))}),[e]),pop:c.a.useCallback((function(){e(Fn())}),[e]),isOpen:Object(h.c)(Dn)}}(),d=o.push,i=o.pop,s=o.isOpen,u=function(){var e=Object(h.b)();return{push:c.a.useCallback((function(n){var r=n.eventId,t=n.storyId,a=n.calendarId;e(Bn({calendarId:a,eventId:r,storyId:t}))}),[e]),pop:c.a.useCallback((function(){e(Yn())}),[e]),isOpen:Object(h.c)(_n)}}(),l=u.pop,b=u.isOpen,j=M().birth,f=Object(h.b)(),v=function(e){var n=e.createOpenHandle,r=Object(h.c)($e);return{resourceGroupLabelContent:c.a.useCallback((function(e){var t=e.groupValue;if(r){var a=r.stories.find((function(e){return e.id===t}));if(a){var c;a.name?c=a.name:(console.warn("cannot find this story name",t),c="No Name");var o=n({calendarId:"MY_CALENDAR_ID",storyId:t}),d=document.createElement("i");d.innerHTML=c+" ";var i=document.createElement("button");return i.innerHTML="\ufe19",i.onclick=o,{domNodes:[d,i]}}console.warn("cannot find story",t)}}),[r,n])}}({createOpenHandle:c.a.useCallback((function(e){var n=e.calendarId,r=e.storyId;return function(){f(Tn({calendarId:n,storyId:r})),d({calendarId:n,storyId:r})}}),[d,f])}).resourceGroupLabelContent,O=hn(),I=O.events,p=O.resources,y=O.init,x=O.select,m=yn().create,g=U,C=c.a.useCallback((function(){m({calendarId:g})}),[m,g]),k=c.a.useCallback((function(e){var n=e.event.extendedProps.calendarId;if(!n)return console.warn("Invalid data. cannot find calendarId.");var r=e.event.id;if(!r)return console.warn("Invalid data. cannot find eventId.");var t=e.event.extendedProps.storyId;if(!t)return console.warn("Invalid data. cannot find storyId.");f(Bn({calendarId:n,eventId:r,storyId:t}))}),[f]);c.a.useEffect((function(){y(j)}),[j,y]);var S=c.a.useMemo((function(){return[{field:G,headerContent:"Category"},{field:B,headerContent:"Event",cellContent:function(e){var r=e.resource.extendedProps,t=r.storyId;if(!t)return console.warn("Invalid data that extended props doesn't storyId.");var a=e.resource.id;if(!a)return console.warn("Invalid data that extended props doesn't resourceId.");var c=r.calendarId;if(!c)return console.warn("Invalid data that extended props doesn't calendarId.");var o=e.fieldValue;o+="!!!";var d=document.createElement("div"),i=document.createElement("button");i.innerHTML="\ufe19",i.onclick=function(){return n({calendarId:c,storyId:t,resourceId:a})},d.appendChild(i);var s=document.createElement("span");return s.innerHTML=o,d.appendChild(s),{domNodes:[d]}}}]}),[n]);return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsxs)("div",{children:[Object(t.jsx)(re,Object(F.a)({events:I,resources:p,select:x,eventClick:k,initialDate:"2020-06-01",resourceGroupLabelContent:v,resourceAreaColumns:S},Zn)),Object(t.jsx)("button",{onClick:C,children:"story:add"})]}),Object(t.jsx)($n,{isOpen:a,onClose:r}),Object(t.jsx)(qn,{isOpen:s,onClose:i}),Object(t.jsx)(Xn,{isOpen:b,onClose:l})]})}function nr(){var e=Object(l.a)(["\n  display: inline-block;\n  height: 100%;\n  object-fit: contain;\n  background: white;\n  padding: .3rem;\n"]);return nr=function(){return e},e}function rr(){return Object(t.jsx)(tr,{src:"/logo457_transparent.png",alt:"img"})}var tr=b.a.img(nr()),ar="https://github.com/snamiki1212/plangoab";function cr(){var e=Object(l.a)(["\n  display: flex;\n  color: white;\n  font-size: 4rem;\n"]);return cr=function(){return e},e}function or(){var e=Object(l.a)(["\n  height: 4rem;\n  width: 4rem;\n"]);return or=function(){return e},e}function dr(){var e=Object(l.a)(["\n  padding: 5rem;\n  min-height: 30vh;\n  background: var(--main-color);\n  color: white;\n"]);return dr=function(){return e},e}function ir(){return Object(t.jsxs)(sr,{children:[Object(t.jsxs)(lr,{children:[Object(t.jsx)(ur,{children:Object(t.jsx)(rr,{})}),Object(t.jsx)("span",{children:"Plangoab"})]}),Object(t.jsx)("a",{href:ar,target:"_blank",rel:"noreferrer",children:"Github"})]})}var sr=b.a.div(dr()),ur=b.a.div(or()),lr=b.a.div(cr());function br(e){var n=e.isOpen,r=e.onClose,a=e.children;return Object(t.jsxs)(R.a,{onClose:r,open:n,children:[Object(t.jsx)(Un.a,{children:"About Plangoab"}),Object(t.jsx)(zn.a,{dividers:!0,children:a})]})}function jr(){return Object(t.jsxs)("div",{children:[Object(t.jsxs)("div",{children:[Object(t.jsx)("h2",{children:"About"}),Object(t.jsx)("p",{children:"A web calendar for a person going abroad, generating a suitable schedule and customizable. Using React, Redux(Redux Toolkit), and Fullcalendar."})]}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h2",{children:"License"}),Object(t.jsx)("li",{children:"GPL-3.0"})]}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h2",{children:"Author"}),Object(t.jsx)("li",{children:Object(t.jsx)("a",{href:"https://github.com/snamiki1212",children:"GitHub:snamiki1212"})}),Object(t.jsx)("li",{children:Object(t.jsx)("a",{href:"https://twitter.com/snamiki1212",children:"Twitter:snamiki1212"})}),Object(t.jsx)("li",{children:Object(t.jsx)("a",{href:"https://snamiki1212.github.io",children:"Portfolio"})})]}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h2",{children:"Source"}),Object(t.jsxs)("span",{children:["This page is managed at"," ",Object(t.jsx)("a",{href:ar,children:"GitHub"}),"."]})]})]})}function fr(){var e=Object(l.a)(["\n  margin-left: auto;\n"]);return fr=function(){return e},e}function vr(){var e=Object(l.a)(["\n  color: white;\n  font-size: 3rem;\n  padding: 1rem;\n"]);return vr=function(){return e},e}function Or(){var e=Object(l.a)(["\n  display: flex;\n  align-items: center;\n  height: 6rem;\n  background: var(--main-color);\n  padding: 1rem;\n"]);return Or=function(){return e},e}function Ir(){var e=nn(),n=e.isOpen,r=e.open,a=e.close;return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsxs)(pr,{children:[Object(t.jsx)(rr,{}),Object(t.jsx)(hr,{children:"Plangoab"}),Object(t.jsx)(yr,{children:Object(t.jsx)(T.a,{variant:"contained",onClick:r,children:"About Plangoab"})})]}),Object(t.jsx)(br,{isOpen:n,onClose:a,children:Object(t.jsx)(jr,{})})]})}var pr=b.a.div(Or()),hr=b.a.span(vr()),yr=b.a.div(fr());function xr(){var e=Object(l.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 2rem;\n"]);return xr=function(){return e},e}function mr(){var e=Object(l.a)(["\n  padding: 0 3rem;\n  display: grid;\n  gap: 5rem;\n"]);return mr=function(){return e},e}function gr(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 2rem;\n"]);return gr=function(){return e},e}function Cr(){return Object(t.jsxs)(kr,{children:[Object(t.jsx)(Ir,{}),Object(t.jsxs)(Sr,{children:[Object(t.jsxs)(wr,{children:[Object(t.jsx)(L,{}),Object(t.jsx)(ln,{})]}),Object(t.jsx)(er,{})]}),Object(t.jsx)(ir,{})]})}var kr=b.a.div(gr()),Sr=b.a.div(mr()),wr=b.a.div(xr());r(127),r(128);var Er=function(){return Object(t.jsx)("div",{className:"App",children:Object(t.jsx)(u,{children:Object(t.jsx)(Cr,{})})})},Mr=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,176)).then((function(n){var r=n.getCLS,t=n.getFID,a=n.getFCP,c=n.getLCP,o=n.getTTFB;r(e),t(e),a(e),c(e),o(e)}))},Dr=r(32),Lr=Object(Dr.c)({resourceModal:En,storyModal:An,eventModal:Vn}),Pr=Object(Dr.c)({templateCalendar:Re,userCalendars:Ke,user:w}),Rr=Object(Dr.c)({features:Pr,ui:Lr});var Tr=Object(y.a)({reducer:Rr});function Fr(e){var n=e.children;return Object(t.jsx)(h.a,{store:Tr,children:n})}d.a.render(Object(t.jsx)(c.a.StrictMode,{children:Object(t.jsx)(Fr,{children:Object(t.jsx)(Er,{})})}),document.getElementById("root")),Mr()}},[[129,1,2]]]);
//# sourceMappingURL=main.f3106983.chunk.js.map